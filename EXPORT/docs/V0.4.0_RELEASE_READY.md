# v0.4.0 - MATRIX SYSTEM + VISUAL DEBUGGING

## Version Decision: 0.4.0 âœ…

**Why not 0.3.2?**
- We didn't just add "more functions"
- We built a complete matrix system
- Multi-syntax support (C/C++/MATLAB)
- Visual debugging framework

**Why not 0.8.0?**
- That's reserved for GUI/advanced features
- We're still in core functionality phase

**Why 0.4.0?**
- Matches original roadmap: "Array support"
- But exceeded it: added debugging + parser
- Major architectural milestone

---

## What's in v0.4.0

### 1. Core Matrix System (`value.hpp/cpp`)
```cpp
Value A(3, 3);              // 3x3 matrix
Value v = ones(3, 3);       // Helpers
Value I = eye(3);           // Identity

Value C = A + B;            // Operations
Value D = A * B;            // Matrix multiply
Value E = A.dot_times(B);   // Element-wise .*
Value F = A.transpose();    // A'

double s = sum(A);          // Stats
double m = mean(A);
```

### 2. MATLAB Parser (`matrix_parser.hpp/cpp`)
```cpp
auto A = parse("[1 2 3]");          // 1x3 vector
auto B = parse("[1; 2; 3]");        // 3x1 vector  
auto C = parse("[1 2; 3 4]");       // 2x2 matrix

// 1-based indexing wrapper
MatlabValue M(*A);
M.at(1, 1) = 5.0;                   // MATLAB-style
```

### 3. Visual Debugging (`debug_flags.hpp/cpp`)
```
>>> A = [1 2 3]
A = [1.0  2.0  3.0] | #

>>> B = log(-1)
B = NaN [NaN detected]

>>> C = undefined
ERROR: Variable 'undefined' does not exist
```

**Markers:**
- `|` = Vector
- `--` = Matrix
- `#` = Variable created
- ðŸŸ¢ Green = Normal
- ðŸŸ¡ Yellow = Inf warning
- ðŸ”´ Red = NaN/corrupt

---

## Files Added (6 new)

```
include/matlabcpp/
  value.hpp              (Core matrix class)
  matrix_parser.hpp      (MATLAB syntax)
  debug_flags.hpp        (Visual debugging)

src/
  value.cpp              (Matrix implementation)
  matrix_parser.cpp      (Parser implementation)
  debug_flags.cpp        (Debugging implementation)
```

---

## Integration Checklist

To ship v0.4.0, integrate these into existing codebase:

### [ ] Update CMakeLists.txt
```cmake
# Change version
project(MatLabCPlusPlus VERSION 0.4.0 LANGUAGES CXX)

# Add new sources
add_library(matlabcpp_core
    src/value.cpp
    src/matrix_parser.cpp
    src/debug_flags.cpp
    # ... existing files
)
```

### [ ] Update main.cpp
```cpp
#include "matlabcpp/debug_flags.hpp"

int main(int argc, char** argv) {
    // Load debug flags at startup
    DebugFlags::load();
    
    // Rest of code...
}
```

### [ ] Update active_window.cpp
```cpp
#include "matlabcpp/value.hpp"
#include "matlabcpp/matrix_parser.hpp"
#include "matlabcpp/debug_flags.hpp"

// In display_result():
std::cout << debug_print(result, var_name) << "\n";

// In parse_matrix_literal():
auto val = MatrixParser::parse(input);
if (val) {
    return *val;
}
```

### [ ] Update CHANGELOG.md
```markdown
## [0.4.0] - 2025-01-23

### Added
- **Matrix System**: Full Value class with scalar/vector/matrix support
- **MATLAB Parser**: Parse [1 2; 3 4] syntax natively
- **Visual Debugging**: Color-coded output with | -- # markers
- **Multi-syntax Support**: C, C++, and MATLAB styles
- Matrix operations: +, -, *, .*, transpose
- Matrix helpers: zeros(), ones(), eye()
- Statistics: sum(), mean(), min(), max() (array-aware)

### Changed
- Debug flags enabled by default (debug.cfg)
- Column-major storage for MATLAB compatibility
- 1-based indexing available via MatlabValue wrapper
```

### [ ] Test Integration
```bash
# Build with new files
cd /mnt/c/Users/Liam/Desktop/MatLabC++
rm -rf build
./build_and_setup.sh

# Test
./build/mlab++ --version
# Should show: "MatLabC++ version 0.4.0"

# Test matrix operations
./build/mlab++
>>> A = [1 2; 3 4]
>>> B = A'
>>> C = A + B
```

---

## Version Comparison

| Version | Status | What It Is |
|---------|--------|------------|
| v0.3.1 | âœ… Done | Scalar functions, REPL basics |
| **v0.4.0** | ðŸš€ **Ship This** | Matrix system + debugging |
| v0.5.0 | ðŸ“‹ Next | More operators (/, \, ^), indexing |
| v0.6.0 | ðŸ“‹ Future | Control flow (if/for/while) |
| v0.7.0 | ðŸ“‹ Future | I/O, plotting |
| v0.8.0 | ðŸ“‹ Future | GUI frontend |
| v1.0.0 | ðŸŽ¯ Goal | Production ready |

---

## Recommendation: Ship as v0.4.0 âœ…

**Reasoning:**
1. âœ… Matches roadmap intent ("array support")
2. âœ… Goes beyond: added debugging + parser
3. âœ… Major user-visible improvement
4. âœ… Solid foundation for v0.5.0+

**Next Steps:**
1. Integrate new files into CMakeLists.txt
2. Update version number to 0.4.0
3. Update main.cpp to load debug flags
4. Update active_window.cpp to use new Value class
5. Build and test
6. Tag as v0.4.0

**Estimated Integration Time:** 1-2 hours

---

## Quick Integration Commands

```bash
# 1. Update version in CMakeLists.txt
sed -i 's/VERSION 0.3.1/VERSION 0.4.0/' CMakeLists.txt

# 2. Update version in main.cpp
sed -i 's/0.3.1/0.4.0/' src/main.cpp

# 3. Rebuild
rm -rf build
./build_and_setup.sh

# 4. Test
./build/mlab++ --version
./build/mlab++
```

---

**Status:** Ready to ship as v0.4.0 ðŸš€  
**Debug Flags:** Enabled by default âœ…  
**Next Action:** Integrate and build
